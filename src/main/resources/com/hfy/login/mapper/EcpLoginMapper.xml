<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.hfy.login.mapper.EcpLoginMapper" ><!-- Result Map user--><resultMap id="user" type="com.hfy.login.entity.Login" >	<result column="USR_ID" property="id"/>	<result column="USR_NAME" property="username"/>	<result column="USR_CA_SN" property="usrCaSn"/>	<result column="USR_IS_CREDENTIAL" property="usrIsCredential"/>	<result column="USR_IS_EXPIRED" property="usrIsExpired"/>	<result column="USR_IS_LOCKED" property="usrIsLocked"/>	<result column="USR_IS_MANAGER" property="usrIsManager"/>	<result column="USR_PERIOD_VALIDITY" property="usrPeriodValidity"/>	<result column="USR_PWD_IS_EXPIRED" property="usrPwdIsExpired"/>	<result column="USR_PWD_TIP" property="usrPwdTip"/>	<result column="USR_PWD_TIP_ANS" property="usrPwdTipAns"/>	<result column="USR_SORT" property="usrSort"/>	<result column="USR_STATUS" property="usrStatus"/>	<result column="USR_PWD_PERIOD_VALIDITY" property="usrPwdPeriodValidity"/>	<result column="USR_IS_USE_IPCHECK" property="usrIsUseIpcheck"/>	<result column="USR_IS_ADMIN" property="usrIsAdmin"/>	<result column="USR_IPPOLICY" property="usrIppolicy"/>	<result column="USR_CREATED_DATE" property="usrCreatedDate"/>	<result column="USR_CHANGEPWD" property="usrChangepwd"/>	<result column="EMP_ID" property="empId"/>	<result column="CREATE_TIME" property="createTime"/>	<result column="USR_EMAIL" property="usrEmail"/>	<result column="USR_PICTURE" property="usrPicture"/>	<result column="USR_AVATAR" property="usrAvatar"/>	<result column="USR_ISDELETE" property="usrIsdelete"/>	<result column="AUDIT_STATUS" property="auditStatus"/>	<result column="USE_STATUS" property="useStatus"/>	<result column="CURRENT_VALID_ID" property="currentValidId"/>	<result column="CREATE_USER" property="createUser"/>	<result column="MODIFY_USER" property="modifyUser"/>	<result column="MODIFY_TIME" property="modifyTime"/>	<result column="CA_BIIND_TIME" property="caBiindTime"/>	<result column="CA_UNBIND_TIME" property="caUnbindTime"/>	<result column="IS_SYSFLAG" property="isSysflag"/>	<result column="IS_USRNAME_MOD" property="isUsrnameMod"/></resultMap><!-- Result Map role--><resultMap id="role" type="com.hfy.login.entity.Ecprole" >		<result column="ROL_ID" property="id"/>		<result column="ROL_EN_NAME" property="rolEnName"/>		<result column="ORG_ID" property="orgId"/>		<result column="ROL_CH_NAME" property="rolChName"/>		<result column="ROL_IS_DEFAULT" property="rolIsDefault"/>		<result column="ROL_MEMO" property="rolMemo"/>		<result column="ROL_STATUS" property="rolStatus"/>		<result column="ROL_TYPE" property="rolType"/>		<result column="ROL_PARENT_ID" property="rolParentId"/>		<result column="DEPT_ID" property="deptId"/>		<result column="ROL_SORT" property="rolSort"/>		<result column="CREATE_TIME" property="createTime"/>		<result column="IS_SYSFLAG" property="isSysflag"/></resultMap><!-- Result Map menu--><resultMap id="menu" type="com.hfy.login.entity.Ecpmenu" >		<result column="RES_ID" property="id"/>		<result column="RES_NAME" property="resName"/>		<result column="RES_URL" property="resUrl"/>		<result column="RES_IS_LOG" property="resIsLog"/>		<result column="RES_IS_SYS" property="resIsSys"/>		<result column="RES_IS_LEAF" property="resIsLeaf"/>		<result column="RES_PATH" property="resPath"/>		<result column="RES_LEVEL" property="resLevel"/>		<result column="RES_PARENT_ID" property="resParentId"/>		<result column="RES_TYPE" property="resType"/>		<result column="RES_SORT" property="resSort"/>		<result column="CREATE_TIME" property="createTime"/>		<result column="SYS_FLAG" property="sysFlag"/>		<result column="REMARKS" property="remarks"/>		<result column="MNU_ID" property="mnuId"/>		<result column="MNU_MEMO" property="mnuMemo"/>		<result column="MNU_NAME" property="mnuName"/>		<result column="MNU_SHOWFLAG" property="mnuShowflag"/>		<result column="MNU_SORT" property="mnuSort"/>		<result column="MNU_TARGET" property="mnuTarget"/>		<result column="MNU_TIP" property="mnuTip"/>		<result column="MNU_PARENT_ID" property="mnuParentId"/>		<result column="MNU_ICON" property="mnuIcon"/>		<result column="MNU_IS_DEFAULT" property="mnuIsDefault"/>		<result column="MNU_IS_LEAF" property="mnuIsLeaf"/>		<result column="MNU_PATH" property="mnuPath"/>		<result column="MNU_LEVEL" property="mnuLevel"/>		<result column="RES_ID" property="resId"/>		<result column="CREATE_TIME" property="createTime"/>		<result column="MENU_FLAG" property="menuFlag"/>		<result column="MNU_VERSION" property="mnuVersion"/>		<result column="MNU_LANG" property="mnuLang"/></resultMap><!-- f_order table all fields --><sql id="columnList" >	AU.USR_ID,	 AU.USR_NAME, AU.USR_CA_SN, AU.USR_IS_CREDENTIAL, AU.USR_IS_EXPIRED, AU.USR_IS_LOCKED, AU.USR_IS_MANAGER, AU.USR_PASSWORD, AU.USR_PERIOD_VALIDITY, AU.USR_PWD_IS_EXPIRED, AU.USR_PWD_TIP, AU.USR_PWD_TIP_ANS, AU.USR_SORT, AU.USR_STATUS, AU.USR_PWD_PERIOD_VALIDITY, AU.USR_IS_USE_IPCHECK, AU.USR_IS_ADMIN, AU.USR_IPPOLICY, AU.USR_CREATED_DATE, AU.USR_CHANGEPWD, AU.EMP_ID, AU.CREATE_TIME, AU.USR_EMAIL, AU.USR_PICTURE, AU.USR_AVATAR, AU.USR_ISDELETE, AU.AUDIT_STATUS, AU.USE_STATUS, AU.CURRENT_VALID_ID, AU.CREATE_USER, AU.MODIFY_USER, AU.MODIFY_TIME, AU.CA_BIIND_TIME, AU.CA_UNBIND_TIME, AU.IS_SYSFLAG, AU.IS_USRNAME_MOD</sql><!-- 查询单个实体 --><select id="getEntityByParam"  resultMap="user" parameterType="Object">	select <include refid="columnList" /> 	from AUTH_USER AU	where AU.USR_NAME=#{username}</select><!-- 按用户id查询角色--><select id="getRoleListByUserId" resultMap="role"  parameterType="Object">select * from auth_role ar where ar.rol_id in(select rol_id from auth_user_role where usr_id = #{userId})</select><!-- 按角色id查询权限--><select id="getMenuListByRoleId" resultMap="menu"  parameterType="Object">	select 	*	from base_menu bm	where bm.id in(select menu_id from base_role_menu where role_id = #{roleId})</select><!-- 按多个角色id查询权限--><select id="getMenuListByRoleIds" resultMap="menu"  parameterType="java.util.List">	select 	*	from base_menu bm	where bm.id in(select menu_id from base_role_menu where role_id in 	<foreach item="item" index="index" collection="list" open="(" separator="," close=")">          #{item}      </foreach>    )</select><!-- 按用户id查询权限--><select id="getMenuListByUserId" resultMap="menu"  parameterType="Object">	select * from auth_resource ar where ar.res_id in(   select res_id from auth_role_resource arr where arr.rol_id in(       select rol_id from auth_user_role where usr_id = #{userId}   ))</select><!-- 按用户id查询页面左侧菜单--><select id="getLeftMenuListByUserId" resultMap="menu"  parameterType="Object">	select * from auth_menu am left join auth_resource ar 	on am.res_id = ar.res_id where am.mnu_id is not null and am.mnu_version = 5 and ar.res_id in(	   select res_id from auth_role_resource arr where arr.rol_id in(	       select rol_id from auth_user_role where usr_id = #{userId}	   )	) order by am.mnu_sort asc</select><!-- 认证用户 --><select id="authUser" resultType="map"  parameterType="Object">select usr_name USERNAME, usr_password PASSWORD from AUTH_USER where UPPER(usr_name)=UPPER(#{username})</select><!-- 修改密码 --><update id="updatePassword" parameterType="Object" >	update base_user set 	<trim  suffixOverrides="," >		password=#{1},		update_date=now(),		update_by=#{2},	</trim> where id=#{0} </update></mapper>