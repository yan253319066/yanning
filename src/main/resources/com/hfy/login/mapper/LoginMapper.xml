<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.hfy.login.mapper.LoginMapper" ><!-- Result Map user--><resultMap id="user" type="com.hfy.login.entity.Login" >	<result column="id" property="id"/>	<result column="username" property="username"/><result column="password" property="password"/><result column="nickname" property="nickname"/><result column="birthday" property="birthday"/><result column="idcard" property="idcard"/><result column="mobile" property="mobile"/><result column="phone" property="phone"/><result column="address" property="address"/><result column="email" property="email"/><result column="user_type" property="userType"/><result column="user_remark" property="userRemark"/><result column="user_status" property="userStatus"/><result column="create_date" property="createDate"/><result column="create_by" property="createBy"/><result column="update_date" property="updateDate"/><result column="update_by" property="updateBy"/><result column="is_delete" property="isDelete"/></resultMap><!-- Result Map role--><resultMap id="role" type="com.hfy.login.entity.Role" >	<result column="id" property="id"/>	<result column="role_name" property="roleName"/><result column="role_code" property="roleCode"/><result column="role_remark" property="roleRemark"/><result column="role_status" property="roleStatus"/><result column="create_date" property="createDate"/><result column="create_by" property="createBy"/><result column="update_date" property="updateDate"/><result column="update_by" property="updateBy"/><result column="is_delete" property="isDelete"/></resultMap><!-- Result Map menu--><resultMap id="menu" type="com.hfy.login.entity.Menu" >	<result column="id" property="id"/>	<result column="menu_name" property="menuName"/><result column="menu_code" property="menuCode"/><result column="menu_forward" property="menuForward"/><result column="menu_path" property="menuPath"/><result column="menu_ico" property="menuIco"/><result column="parent_id" property="parentId"/><result column="default_permission" property="defaultPermission"/><result column="default_home" property="defaultHome"/><result column="sort" property="sort"/><result column="menu_type" property="menuType"/><result column="menu_remark" property="menuRemark"/><result column="create_date" property="createDate"/><result column="create_by" property="createBy"/><result column="update_date" property="updateDate"/><result column="update_by" property="updateBy"/></resultMap><!-- Result Map org --><resultMap id="org" type="com.hfy.login.entity.Org" >	<result column="id" property="id"/>	<result column="org_name" property="orgName"/><result column="org_code" property="orgCode"/><result column="org_level" property="orgLevel"/><result column="org_type" property="orgType"/><result column="parent_id" property="parentId"/><result column="sort" property="sort"/><result column="org_remark" property="orgRemark"/><result column="create_date" property="createDate"/><result column="create_by" property="createBy"/><result column="update_date" property="updateDate"/><result column="update_by" property="updateBy"/><result column="is_delete" property="isDelete"/></resultMap><!-- f_order table all fields --><sql id="columnList" >	bu.id,	 bu.username, bu.nickname, bu.birthday, bu.idcard, bu.mobile, bu.phone, bu.address, bu.email, bu.user_type, bu.user_remark, bu.user_status, bu.create_date, bu.create_by, bu.update_date, bu.update_by, bu.is_delete</sql><!-- 查询单个实体 --><select id="getEntityByParam"  resultMap="user" parameterType="Object">	select <include refid="columnList" /> 	from base_user bu	where bu.username=#{username}</select><!-- 按用户id查询角色--><select id="getRoleListByUserId" resultMap="role"  parameterType="Object">	select 	*	from base_role br	where br.id in(select role_id from base_user_role where user_id = #{userId})</select><!-- 按角色id查询权限--><select id="getMenuListByRoleId" resultMap="menu"  parameterType="Object">	select 	*	from base_menu bm	where bm.id in(select menu_id from base_role_menu where role_id = #{roleId})</select><!-- 按多个角色id查询权限--><select id="getMenuListByRoleIds" resultMap="menu"  parameterType="java.util.List">	select 	*	from base_menu bm	where bm.id in(select menu_id from base_role_menu where role_id in 	<foreach item="item" index="index" collection="list" open="(" separator="," close=")">          #{item}      </foreach>    )</select><!-- 按用户id查询权限--><select id="getMenuListByUserId" resultMap="menu"  parameterType="Object">	SELECT 	*	FROM base_menu bm	WHERE bm.id IN(SELECT menu_id FROM base_role_menu WHERE role_id IN 		(		SELECT role_id FROM base_user_role WHERE user_id=#{userId}		)	)</select><!-- 按用户id查询页面左侧菜单--><select id="getLeftMenuListByUserId" resultMap="menu"  parameterType="Object">	SELECT 	*	FROM base_menu bm	WHERE bm.id IN(SELECT menu_id FROM base_role_menu WHERE menu_type like 'menu%' and role_id IN 		(		SELECT role_id FROM base_user_role WHERE user_id=#{userId}		)	) order by bm.sort asc</select><!-- 认证用户 --><select id="authUser" resultType="map"  parameterType="Object">select USERNAME,PASSWORD from base_user where username=#{username}</select><!-- 按orgId查询组织机构 --><select id="getOrgByOrgId" resultMap="org"  parameterType="Object">select * from base_org where id=#{orgId}</select><!-- 修改密码 --><update id="updatePassword" parameterType="Object" >	update base_user set 	<trim  suffixOverrides="," >		password=#{1},		update_date=now(),		update_by=#{2},	</trim> where id=#{0} </update></mapper>